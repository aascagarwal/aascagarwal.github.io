"use strict";(self.webpackChunkshmooz_admin=self.webpackChunkshmooz_admin||[]).push([[9172],{81628:function(e,r,n){var a=n(1413),t=n(93433),i=n(29439),s=n(47313),l=n(17592),o=n(17551),u=n(57829),d=n(70501),c=n(47131),m=n(24193),p=n(16031),v=n(80614),Z=n(81195),g=n(19713),h=n(46417),x=(0,l.ZP)("div")((function(e){var r=e.theme;return{width:64,height:64,fontSize:24,display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",margin:r.spacing(.5),borderRadius:r.shape.borderRadius,"&:hover":{opacity:.72}}}));function f(e){console.log(e);var r=e.setFieldValue,n=e.fieldName,l=e.multiple,f=e.attachments,b=(0,s.useState)(f||[]),y=(0,i.Z)(b,2),j=y[0],q=y[1],E=(0,s.useCallback)((function(e){var a=[];a=e.map((function(e){var r=new FileReader;return r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){var e=r.result;console.log(e)},r.readAsArrayBuffer(e),Object.assign(e,{preview:URL.createObjectURL(e)})})),l&&(null===j||void 0===j?void 0:j.length)>0&&(a=[].concat((0,t.Z)(a),(0,t.Z)(j))),q(a),r(n,l?a:e[0])}),[q,r]),M=(0,v.uI)({onDrop:E,multiple:l,noDrag:!l,maxFiles:5}),w=M.getRootProps,k=M.getInputProps,C=M.isDragActive;return(0,h.jsxs)(h.Fragment,{children:[null===j||void 0===j?void 0:j.map((function(e){var a=e.name,t=e.preview,i=(0,p.isString)(e)?e:a;return(0,h.jsxs)(u.Z,{sx:{p:0,m:.5,width:64,height:64,borderRadius:.25,overflow:"hidden",position:"relative"},children:[(0,h.jsx)(d.Z,{variant:"outlined",component:"img",src:(0,p.isString)(e)?e:t,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",borderRadius:1}}),(0,h.jsx)(u.Z,{sx:{top:6,right:6,position:"absolute"},children:(0,h.jsx)(c.Z,{size:"small",onClick:function(){return function(e){var a=l?j.filter((function(r){return r!==e})):null;q(a),r(n,a)}(e)},sx:{p:"1px",color:"common.white",bgcolor:function(e){return(0,o.Fq)(e.palette.grey[900],.72)},"&:hover":{bgcolor:function(e){return(0,o.Fq)(e.palette.grey[900],.48)}}},children:(0,h.jsx)(Z.Z,{})})})]},i)})),(0,h.jsxs)(x,(0,a.Z)((0,a.Z)({},w()),{},{sx:(0,a.Z)({},C&&{opacity:.72}),children:[(0,h.jsx)("input",(0,a.Z)({},k())),(0,h.jsx)(m.Z,{variant:"outlined",size:"small",sx:{p:0,minWidth:0},children:(0,h.jsx)(g.Z,{})})]}))]})}r.Z=function(e){return(0,h.jsx)(u.Z,{sx:{display:"flex"},children:(0,h.jsx)(f,(0,a.Z)({},e))})}},19172:function(e,r,n){n.r(r),n.d(r,{default:function(){return Se}});var a=n(15861),t=n(93433),i=n(4942),s=n(29439),l=n(1413),o=n(45987),u=n(64687),d=n.n(u),c=n(47313),m=n(57829),p=n(5297),v=n(60032),Z=n(24193),g=n(85281),h=n(79429),x=n(3463),f=n(2135),b=n(16031),y=n(24631),j=n(46417),q=["errorText"];function E(e){e.errorText;var r=(0,o.Z)(e,q),n=(0,h.U$)(e),a=(0,s.Z)(n,2),t=a[0],i=a[1];return(0,j.jsx)(y.Z,(0,l.Z)((0,l.Z)({type:"text",error:i.touched&&i.error&&!0,helperText:function(){var e=(0,b.at)(i,"touched","error"),r=(0,s.Z)(e,2),n=r[0],a=r[1];return n&&a?a:null}()},t),r))}var M=n(15480),w=n(1550),k=n(83929),C=n(44758),_=["label"];function S(e){var r=e.label,n=(0,o.Z)(e,_),a=(0,h.U$)(e),t=(0,s.Z)(a,3),i=t[0],u=t[1],d=t[2].setValue,c=function(){var e=(0,b.at)(u,"touched","error"),r=(0,s.Z)(e,2),n=r[0],a=r[1];return n&&a?(0,j.jsx)(M.Z,{children:a}):null};return(0,j.jsxs)(w.Z,(0,l.Z)((0,l.Z)({},n),{},{children:[(0,j.jsx)(k.Z,{value:i.checked,checked:i.checked,control:(0,j.jsx)(C.Z,(0,l.Z)((0,l.Z)({},i),{},{onChange:function(e){d(e.target.checked)}})),label:r}),(0,j.jsx)(c,{})]}))}var N=n(51405),P=["data"];function F(e){var r=e.data,n=(0,o.Z)(e,P),a=(0,h.U$)(e),t=(0,s.Z)(a,2),i=t[0],u=t[1],d=i.value,c=(0,b.at)(u,"touched","error"),m=(0,s.Z)(c,2),p=m[0],v=m[1],Z=p&&v&&!0;return(0,j.jsx)(y.Z,(0,l.Z)((0,l.Z)((0,l.Z)({select:!0,error:u.touched&&u.error&&!0,helperText:Z?(0,j.jsx)(M.Z,{children:v}):null},i),n),{},{value:d||"",children:r.map((function(e,r){return(0,j.jsx)(N.Z,{value:e.value,children:e.label},r)}))}))}F.defaultProps={data:[]};var V=F;n(30411);var D=n(81628),R=["label","value"];function z(e){e.label;var r=e.value,n=(0,o.Z)(e,R),a=(0,h.U$)(e),t=(0,s.Z)(a,3),i=(t[0],t[1],t[2].setValue);return(0,j.jsx)(D.Z,{attachments:r?[r]:[],setFieldValue:function(e,r){i(r||[])},fieldName:n.name})}var A=n(70816),O=n.n(A);var L,U,I,T="checkoutForm",W={firstName:{name:"firstName",label:"First name*",requiredErrorMsg:"First name is required"},lastName:{name:"lastName",label:"Last name*",requiredErrorMsg:"Last name is required"},address1:{name:"address1",label:"Address Line 1*",requiredErrorMsg:"Address Line 1 is required"},address2:{name:"address2",label:"Address Line 2"},city:{name:"city",label:"City*",requiredErrorMsg:"City is required"},state:{name:"state",label:"State/Province/Region"},zipcode:{name:"zipcode",label:"Zipcode*",requiredErrorMsg:"Zipcode is required",invalidErrorMsg:"Zipcode is not valid (e.g. 70000)"},country:{name:"country",label:"Country*",requiredErrorMsg:"Country is required"},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:"Use this address for payment details"},nameOnCard:{name:"nameOnCard",label:"Name on card*",requiredErrorMsg:"Name on card is required"},cardNumber:{name:"cardNumber",label:"Card number*",requiredErrorMsg:"Card number is required",invalidErrorMsg:"Card number is not valid (e.g. 4111111111111)"},expiryDate:{name:"expiryDate",label:"Expiry date*",requiredErrorMsg:"Expiry date is required",invalidErrorMsg:"Expiry date is not valid"},cvv:{name:"cvv",label:"CVV*",requiredErrorMsg:"CVV is required",invalidErrorMsg:"CVV is invalid (e.g. 357)"}},G=W,$=G.firstName,B=G.lastName,J=G.address1,H=G.city,K=G.zipcode,Q=G.country,X=G.nameOnCard,Y=G.cardNumber,ee=G.expiryDate,re=G.cvv,ne=[x.Ry().shape((L={},(0,i.Z)(L,$.name,x.Z_().required("".concat($.requiredErrorMsg))),(0,i.Z)(L,B.name,x.Z_().required("".concat(B.requiredErrorMsg))),(0,i.Z)(L,J.name,x.Z_().required("".concat(J.requiredErrorMsg))),(0,i.Z)(L,H.name,x.Z_().nullable().required("".concat(H.requiredErrorMsg))),(0,i.Z)(L,K.name,x.Z_().required("".concat(K.requiredErrorMsg)).test("len","".concat(K.invalidErrorMsg),(function(e){return e&&5===e.length}))),(0,i.Z)(L,Q.name,x.Z_().nullable().required("".concat(Q.requiredErrorMsg))),L)),x.Ry().shape((U={},(0,i.Z)(U,X.name,x.Z_().required("".concat(X.requiredErrorMsg))),(0,i.Z)(U,Y.name,x.Z_().required("".concat(Y.requiredErrorMsg)).matches(/^(?:4[0-9]{12}(?:[0-9]{3})?)$/,Y.invalidErrorMsg)),(0,i.Z)(U,ee.name,x.Z_().nullable().required("".concat(ee.requiredErrorMsg)).test("expDate",ee.invalidErrorMsg,(function(e){if(e){var r=new Date,n=new Date(2050,12,31);return!!O()(e,O().ISO_8601).isValid()&&O()(e).isBetween(r,n)}return!1}))),(0,i.Z)(U,re.name,x.Z_().required("".concat(re.requiredErrorMsg)).test("len","".concat(re.invalidErrorMsg),(function(e){return e&&3===e.length}))),U))],ae=W,te=ae.firstName,ie=ae.lastName,se=ae.address1,le=ae.city,oe=ae.zipcode,ue=ae.country,de=ae.useAddressForPaymentDetails,ce=ae.nameOnCard,me=ae.cardNumber,pe=ae.expiryDate,ve=ae.cvv,Ze=(I={},(0,i.Z)(I,te.name,""),(0,i.Z)(I,ie.name,""),(0,i.Z)(I,se.name,""),(0,i.Z)(I,le.name,""),(0,i.Z)(I,oe.name,""),(0,i.Z)(I,ue.name,""),(0,i.Z)(I,de.name,!1),(0,i.Z)(I,ce.name,""),(0,i.Z)(I,me.name,""),(0,i.Z)(I,pe.name,""),(0,i.Z)(I,ve.name,""),n(19860)),ge=function(e){return{stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}},he=n(33497),xe=n(48384),fe=n(77863),be=n(9019),ye=n(61113),je=n(81753);function qe(e){var r,n,a,t=null!==e&&void 0!==e&&e.details?null===(r=JSON.parse(null===e||void 0===e||null===(n=e.details)||void 0===n?void 0:n.replace(/\n/g,"")))||void 0===r?void 0:r.options:[],i=[];switch(Array.isArray(t)&&t.length>0?i=t.map((function(e,r){return{value:r,label:e}})):t&&(null===(a=Object.keys(t))||void 0===a?void 0:a.length)>0&&Object.keys(t).forEach((function(e){i.push({value:e,label:t[e]})})),e.type){case"text":return(0,j.jsx)(E,{name:e.key,label:e.display_name,fullWidth:!0});case"select_dropdown":return(0,j.jsx)(V,{name:e.key,label:e.display_name,data:i,fullWidth:!0});case"text_area":return(0,j.jsx)(E,{name:e.key,label:e.display_name,multiline:!0,fullWidth:!0});case"image":return(0,j.jsxs)(be.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,j.jsx)(be.ZP,{item:!0,xs:12,sm:4,children:(0,j.jsx)(ye.Z,{variant:"body2",children:e.display_name})}),(0,j.jsxs)(be.ZP,{item:!0,xs:12,sm:8,children:[(0,j.jsx)(z,{name:e.key,label:e.display_name,value:e.value}),";"]})]});case"checkbox":return(0,j.jsx)(S,{name:e.key,label:e.display_name});case"double":return(0,j.jsx)(E,{name:e.key,label:e.display_name,type:"number",fullWidth:!0});case"double_range":return(0,j.jsxs)(be.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,j.jsx)(be.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(ye.Z,{variant:"caption",children:e.display_name})}),(0,j.jsx)(be.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(je.ZP,{defaultValue:[20,37],valueLabelDisplay:"auto",disableSwap:!0,marks:[{value:0,label:"0%"},{value:100,label:"100%"}]})})]});default:return(0,j.jsx)("div",{children:"Not Found"})}}function Ee(e){var r=e.settings,n=e.tabName;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ye.Z,{variant:"h6",gutterBottom:!0,children:n}),(0,j.jsx)(be.ZP,{container:!0,spacing:3,children:(0,t.Z)(r).sort((function(e,r){return e.order-r.order})).map((function(e){return(0,j.jsx)(be.ZP,{item:!0,xs:12,sm:6,children:qe(e)},e.key)}))})]})}var Me=["children","value","index"],we=["Shipping address","Payment details","Review your order"],ke=T;function Ce(e){var r=e.children,n=e.value,a=e.index,t=(0,o.Z)(e,Me);return(0,j.jsx)("div",(0,l.Z)((0,l.Z)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},t),{},{children:n===a&&(0,j.jsx)(m.Z,{sx:{p:0},children:r})}))}var _e=function(e){var r=e.settingGroups,n=c.useState((0,t.Z)(r.keys())[0]),a=(0,s.Z)(n,2),i=a[0],o=a[1],u=(0,c.useMemo)((function(){return(0,t.Z)(r.keys())}),r),d=(0,h.u6)(),m=d.values;d.isValid,d.submitForm;return(0,j.jsx)(he.Z,{title:"",children:(0,j.jsxs)("div",{children:[(0,j.jsx)(p.Z,{value:i,indicatorColor:"primary",onChange:function(e,r){console.log(m),o(r)},sx:{mb:3,minHeight:"auto","& button":{minWidth:100},"& a":{minHeight:"auto",minWidth:10,py:1.5,px:1,mr:2.25,color:"grey.600"},"& a.Mui-selected":{color:"primary.main"}},"aria-label":"simple tabs example",variant:"scrollable",children:u.map((function(e,r){return(0,j.jsx)(v.Z,(0,l.Z)({component:f.rU,to:"#",value:e,label:e},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(e)))}))}),u.map((function(e,n){return(0,j.jsx)(Ce,{value:i,index:e,children:(0,j.jsx)(Ee,{settings:r.get(e),tabName:e})})}))]})})};var Se=function(){var e=(0,Ze.Z)(),r=ge(e),n=(0,c.useState)(0),t=(0,s.Z)(n,2),o=t[0],u=t[1],m=(0,c.useState)({}),p=(0,s.Z)(m,2),v=p[0],x=p[1],f=(0,c.useState)(new Map),b=(0,s.Z)(f,2),y=b[0],q=b[1],E=ne[o],M=o===we.length-1,w=(0,fe.I0)();(0,c.useEffect)((function(){w((0,xe.Gw)())}),[w]);var k=(0,fe.v9)((function(e){return console.log(e),e.adminSettings})).settings;function C(e){return new Promise((function(r){return setTimeout(r,e)}))}(0,c.useEffect)((function(){if((null===k||void 0===k?void 0:k.length)>0){var e=function(e){var r={},n=new Map;return e.forEach((function(e){var a=n.get(e.group);a?a.add(e):n.set(e.group,new Set([e]));var t=e.key.split("."),o=(0,s.Z)(t,2),u=o[0],d=o[1];r=(0,l.Z)((0,l.Z)({},r),{},(0,i.Z)({},u,(0,l.Z)((0,l.Z)({},r[u]),{},(0,i.Z)({},d,e.value))))})),console.log(n),console.log(r),{initialValues:r,settingGroups:n}}(k);x(e.initialValues),q(e.settingGroups)}}),[k]);var _=function(){var e=(0,a.Z)(d().mark((function e(r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(1e3);case 2:alert(JSON.stringify(r,null,2)),n.setSubmitting(!1),u(o+1);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(h.J9,{initialValues:v,enableReinitialize:!0,validationSchema:E,onSubmit:function(e,r){M?_(e,r):(u(o+1),r.setTouched({}),r.setSubmitting(!1))},children:function(e){var n=e.isSubmitting;return(0,j.jsxs)(h.l0,{id:ke,children:[y.size>0&&(0,j.jsx)(_e,{settingGroups:y}),(0,j.jsx)("div",{style:r.buttons,children:(0,j.jsxs)("div",{style:r.wrapper,children:[(0,j.jsx)(Z.Z,{disabled:n,type:"submit",variant:"contained",color:"primary",sx:r.button,children:"Save Changes"}),n&&(0,j.jsx)(g.Z,{size:24,sx:r.buttonProgress})]})})]})}})})})}}}]);