"use strict";(self.webpackChunkshmooz_admin=self.webpackChunkshmooz_admin||[]).push([[5087],{81628:function(e,t,n){var i=n(1413),r=n(93433),l=n(29439),o=n(47313),a=n(17592),s=n(17551),d=n(57829),u=n(70501),c=n(47131),h=n(24193),m=n(16031),p=n(58823),x=n(81195),f=n(19713),v=n(46417),g=(0,a.ZP)("div")((function(e){var t=e.theme;return{width:64,height:64,fontSize:24,display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",margin:t.spacing(.5),borderRadius:t.shape.borderRadius,"&:hover":{opacity:.72}}}));function y(e){console.log(e);var t=e.setFieldValue,n=e.fieldName,a=e.multiple,y=e.attachments,Z=(0,o.useState)(y||[]),_=(0,l.Z)(Z,2),j=_[0],b=_[1],T=(0,o.useCallback)((function(e){var i=[];i=e.map((function(e){var t=new FileReader;return t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){var e=t.result;console.log(e)},t.readAsArrayBuffer(e),Object.assign(e,{preview:URL.createObjectURL(e)})})),a&&(null===j||void 0===j?void 0:j.length)>0&&(i=[].concat((0,r.Z)(i),(0,r.Z)(j))),b(i),t(n,a?i:e[0])}),[b,t]),C=(0,p.uI)({onDrop:T,multiple:a,noDrag:!a,maxFiles:5}),P=C.getRootProps,S=C.getInputProps,k=C.isDragActive;return(0,v.jsxs)(v.Fragment,{children:[null===j||void 0===j?void 0:j.map((function(e){var i=e.name,r=e.preview,l=(0,m.isString)(e)?e:i;return(0,v.jsxs)(d.Z,{sx:{p:0,m:.5,width:64,height:64,borderRadius:.25,overflow:"hidden",position:"relative"},children:[(0,v.jsx)(u.Z,{variant:"outlined",component:"img",src:(0,m.isString)(e)?e:r,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",borderRadius:1}}),(0,v.jsx)(d.Z,{sx:{top:6,right:6,position:"absolute"},children:(0,v.jsx)(c.Z,{size:"small",onClick:function(){return function(e){var i=a?j.filter((function(t){return t!==e})):null;b(i),t(n,i)}(e)},sx:{p:"1px",color:"common.white",bgcolor:function(e){return(0,s.Fq)(e.palette.grey[900],.72)},"&:hover":{bgcolor:function(e){return(0,s.Fq)(e.palette.grey[900],.48)}}},children:(0,v.jsx)(x.Z,{})})})]},l)})),(0,v.jsxs)(g,(0,i.Z)((0,i.Z)({},P()),{},{sx:(0,i.Z)({},k&&{opacity:.72}),children:[(0,v.jsx)("input",(0,i.Z)({},S())),(0,v.jsx)(h.Z,{variant:"outlined",size:"small",sx:{p:0,minWidth:0},children:(0,v.jsx)(f.Z,{})})]}))]})}t.Z=function(e){return(0,v.jsx)(d.Z,{sx:{display:"flex"},children:(0,v.jsx)(y,(0,i.Z)({},e))})}},25087:function(e,t,n){n.r(t),n.d(t,{default:function(){return Be}});var i=n(93433),r=n(15861),l=n(1413),o=n(29439),a=n(64687),s=n.n(a),d=n(47313),u=n(58467),c=n(19860),h=n(47131),m=n(21917),p=n(61113),x=n(78490),f=n(80315),v=n(42832),g=n(24193),y=n(19536),Z=n(9019),_=n(66182),j=n(3463),b=n(46417);j.Ry({firstName:j.Z_().required("First Name is required"),lastName:j.Z_().required("Last Name is required")}),j.Ry({cardName:j.Z_().required("First Name is required"),cardNumber:j.Z_().required("Last Name is required")});var T=n(33497),C=n(24631),P=n(32729),S=n(83929),k=n(44758),w=n(79429),F=n(16),D=n.n(F),B=(n(94230),n(85554)),E=n(49786),q=j.Ry({title:j.Z_().required("Title is required"),description:j.Z_().required("Description is required"),excerpt:j.Z_().required("Excerpt is required"),category_id:j.Z_().nullable().required("Category is required"),booking_close_before:j.Rx().integer("Please enter a number")}),I=function(e){var t=e.detailsData,n=e.setDetailsData,i=e.handleNext,r=(e.setErrorIndex,(0,w.TA)({enableReinitialize:!0,initialValues:{title:t.title||"",description:t.description||"",slug:t.slug||"",excerpt:t.excerpt||"",category_id:t.category_id,faq:t.faq,offline_payment_info:t.offline_payment_info||"",booking_close_before:t.booking_close_before,is_private:t.is_private,featured:t.featured,emergency_contact_number:t.emergency_contact_number||""},validationSchema:q,onSubmit:function(e,t){var o=t.setFieldError,a=t.setFieldTouched,s=t.setErrors;t.dirty;console.log(r);var d={title:e.title,description:e.description,slug:e.slug,excerpt:e.excerpt,category_id:e.category_id,faq:e.faq,offline_payment_info:e.offline_payment_info,booking_close_before:e.booking_close_before,is_private:e.is_private,featured:e.featured,emergency_contact_number:e.emergency_contact_number};n((function(e){return(0,l.Z)((0,l.Z)({},e),d)})),i(d,{setFieldTouched:a,setErrors:s,setFieldError:o,dirty:r.dirty})}})),o=(0,c.Z)(),a=(0,B.I0)();(0,d.useEffect)((function(){a((0,E.CP)())}),[a]);var s=(0,B.v9)((function(e){return console.log(e),e.category})).categories;(0,d.useMemo)((function(){return s.find((function(e){return e.id===r.values.category_id}))}),[r.values.category_id]);return(0,d.useEffect)((function(){console.log(r.values)}),[r.values]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Details"}),(0,b.jsx)("form",{onSubmit:r.handleSubmit,id:"validation-forms",children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:3,style:{overflow:"auto"},children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(C.Z,{id:"title",name:"title",label:"Title *",value:r.values.title,onChange:r.handleChange,error:r.touched.title&&Boolean(r.errors.title),helperText:r.touched.title&&r.errors.title,fullWidth:!0,autoComplete:"given-name"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(C.Z,{fullWidth:!0,multiline:!0,rows:3,id:"description",name:"description",label:"Description *",value:r.values.description,onChange:r.handleChange,error:r.touched.title&&Boolean(r.errors.description),helperText:r.touched.title&&r.errors.description})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(C.Z,{id:"slug",name:"slug",label:"Slug",value:r.values.slug,onChange:r.handleChange,error:r.touched.slug&&Boolean(r.errors.slug),helperText:r.touched.slug&&r.errors.slug,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(C.Z,{id:"excerpt",name:"excerpt",label:"Excerpt *",value:r.values.excerpt,onChange:r.handleChange,error:r.touched.excerpt&&Boolean(r.errors.excerpt),helperText:r.touched.excerpt&&r.errors.excerpt,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(P.Z,{id:"category_id",name:"category_id",options:s,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return console.log(t),e.id===(null===t||void 0===t?void 0:t.id)},value:s.find((function(e){return e.id===r.values.category_id}))||null,onChange:function(e,t){console.log(t),r.setFieldValue("category_id",(null===t||void 0===t?void 0:t.id)||null)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{label:"Category *",placeholder:"Select Category",error:r.touched.category_id&&Boolean(r.errors.category_id),helperText:r.touched.category_id&&r.errors.category_id}))}})}),(0,b.jsxs)(Z.ZP,{item:!0,xs:12,sx:{"& .quill":{bgcolor:"dark"===o.palette.mode?"dark.main":"grey.50",borderRadius:"12px","& .ql-toolbar":{bgcolor:"dark"===o.palette.mode?"dark.light":"grey.100",borderColor:"dark"===o.palette.mode?o.palette.dark.light+20:"grey.400",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},"& .ql-container":{borderColor:"dark"===o.palette.mode?"".concat(o.palette.dark.light+20," !important"):"".concat(o.palette.grey[400]," !important"),borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px","& .ql-editor":{minHeight:125}}}},children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"FAQs"}),(0,b.jsx)(D(),{theme:"snow",value:r.values.faq,onChange:function(e){console.log(e),r.setFieldValue("faq",e)}})]}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(C.Z,{id:"offline_payment_info",name:"offline_payment_info",label:"Offline Payment Info",multiline:!0,rows:2,value:r.values.offline_payment_info,onChange:r.handleChange,error:r.touched.offline_payment_info&&Boolean(r.errors.offline_payment_info),helperText:r.touched.offline_payment_info&&r.errors.offline_payment_info,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(C.Z,{id:"booking_close_before",name:"booking_close_before",label:"Booking Close Before (in mins) *",type:"number",value:r.values.booking_close_before,onChange:r.handleChange,error:r.touched.booking_close_before&&Boolean(r.errors.booking_close_before),helperText:r.touched.booking_close_before&&r.errors.booking_close_before,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(S.Z,{control:(0,b.jsx)(k.Z,{color:"secondary",name:"is_private",value:r.values.is_private,onChange:r.handleChange}),label:"Is Private"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(S.Z,{control:(0,b.jsx)(k.Z,{color:"secondary",name:"featured",value:r.values.featured,onChange:r.handleChange}),label:"Featured"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(C.Z,{id:"emergency_contact_number",name:"emergency_contact_number",label:"Emergency Contact",type:"number",value:r.values.emergency_contact_number,onChange:r.handleChange,error:r.touched.emergency_contact_number&&Boolean(r.errors.emergency_contact_number),helperText:r.touched.emergency_contact_number&&r.errors.emergency_contact_number,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(v.Z,{direction:"row",justifyContent:"flex-end",children:(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",children:"Next"})})})})]})})]})},V=n(70816),M=n.n(V),W=n(43394),R=n(44714),N=n(99572),O=n(97101),z=j.Ry({start_date:j.hT().nullable().required("Start date is required").min(new Date((new Date).setHours(0,0,0,0)),"Start Date cannot be in past"),end_date:j.hT().nullable().required("End date is required").when("start_date",(function(e,t){return e?t.min(e,"End date cannot be before Start Date"):t})),start_time:j.Z_().required("Start time is required"),end_time:j.hT().nullable().required("End time is required").test("min_end_time","End time cannot be before Start time",(function(e){var t=this.parent,n=t.end_date,i=t.start_time,r=t.start_date,l=M()(i).format("HH:mm"),o=M()(e).format("HH:mm"),a=M()("".concat(M()(r).format("YYYY-MM-DD")," ").concat(l)),s=M()("".concat(M()(n).format("YYYY-MM-DD")," ").concat(o));return!!a.isValid()&&s.isSameOrAfter(a)}))}),A=function(e){var t=e.detailsData,n=e.setDetailsData,i=e.handleNext,r=e.handleBack,o=(e.setErrorIndex,(0,w.TA)({initialValues:{start_date:t.start_date,end_date:t.end_date,start_time:t.start_date?M()("".concat(M()(t.start_date).format("YYYY-MM-DD")," ").concat(t.start_time)).toISOString():"",end_time:t.end_date?M()("".concat(M()(t.end_date).format("YYYY-MM-DD")," ").concat(t.end_time)).toISOString():""},validationSchema:z,onSubmit:function(e,t){var r=t.setFieldError,a=t.setFieldTouched,s=t.setErrors,d=(0,l.Z)((0,l.Z)({},e),{},{start_date:M()(e.start_date).format("YYYY-MM-DD"),end_date:M()(e.end_date).format("YYYY-MM-DD"),start_time:M()(e.start_time).format("HH:mm:ss"),end_time:M()(e.end_time).format("HH:mm:ss")});n((function(e){return(0,l.Z)((0,l.Z)({},e),d)})),i(d,{setFieldTouched:a,setErrors:s,setFieldError:r,dirty:o.dirty})}}));(0,c.Z)();return(0,d.useEffect)((function(){console.log(o.values)}),[o.values]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Event Schedule"}),(0,b.jsx)("form",{onSubmit:o.handleSubmit,id:"validation-forms",children:(0,b.jsx)(W._,{dateAdapter:O.H,children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:3,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:6,children:(0,b.jsx)(R.$,{disablePast:!0,label:"Start Date",value:o.values.start_date||"",inputFormat:"yyyy/MM/dd",onChange:function(e){o.setFieldValue("start_date",e)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({fullWidth:!0},e),{},{id:"start_date",name:"start_date",error:o.touched.start_date&&Boolean(o.errors.start_date),helperText:o.touched.start_date&&o.errors.start_date}))}})}),(0,b.jsx)(Z.ZP,{item:!0,xs:6,children:(0,b.jsx)(R.$,{disablePast:!0,label:"End Date",value:o.values.end_date||"",inputFormat:"yyyy/MM/dd",onChange:function(e){o.setFieldValue("end_date",e)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({fullWidth:!0},e),{},{error:o.touched.end_date&&Boolean(o.errors.end_date),helperText:o.touched.end_date&&o.errors.end_date}))}})}),(0,b.jsx)(Z.ZP,{item:!0,xs:6,children:(0,b.jsx)(N.k,{label:"Start Time",value:o.values.start_time||"",disableIgnoringDatePartForTimeValidation:!0,inputFormat:"HH:mm",onChange:function(e){o.setFieldValue("start_time",e)},ampm:!1,renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({fullWidth:!0},e),{},{error:o.touched.start_time&&Boolean(o.errors.start_time),helperText:o.touched.start_time&&o.errors.start_time}))}})}),(0,b.jsx)(Z.ZP,{item:!0,xs:6,children:(0,b.jsx)(N.k,{label:"End Time",value:o.values.end_time||null,inputFormat:"HH:mm",onChange:function(e){o.setFieldValue("end_time",e)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({fullWidth:!0},e),{},{error:o.touched.end_time&&Boolean(o.errors.end_time),helperText:o.touched.end_time&&o.errors.end_time}))}})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",children:[(0,b.jsx)(g.Z,{onClick:r,sx:{my:3,ml:1},disabled:o.isSubmitting,children:"Back"}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",disabled:o.isSubmitting,children:"Next"})})]})})]})})})]})},Y=n(70024),L=n(57829),H=n(74652),J=n(14081),Q=n(66795),U=n(20647),K=n(83870),G=n.n(K),$=n(88706);var X={current:null};function ee(e){var t=e.setSelected,n=d.useState(null),r=(0,o.Z)(n,2),a=r[0],s=r[1],u=d.useState(""),c=(0,o.Z)(u,2),h=c[0],m=c[1],x=d.useState([]),f=(0,o.Z)(x,2),v=f[0],g=f[1],y=(d.useRef(!1),d.useRef()),_=d.useMemo((function(){return(0,$.Z)((function(e,t){X.current.getPlacePredictions(e,t)}),400)}),[]);d.useEffect((function(){var e=!0;if(!X.current&&window.google&&(X.current=new window.google.maps.places.AutocompleteService),X.current){if(""!==h)return _({input:h,types:["geocode"]},(function(t){if(e){var n=[];a&&(n=[a]),t&&(n=[].concat((0,i.Z)(n),(0,i.Z)(t))),g(n)}})),function(){e=!1};g(a?[a]:[])}}),[a,h,_]);return(0,b.jsxs)("div",{children:[(0,b.jsx)(P.Z,{id:"google-map-demo",sx:{width:300},getOptionLabel:function(e){return"string"===typeof e?e:e.description},filterOptions:function(e){return e},options:v,autoComplete:!0,includeInputInList:!0,filterSelectedOptions:!0,value:a,noOptionsText:"No locations",onChange:function(e,n){console.log(n),function(e){if(window.google){var n=new window.google.maps.places.PlacesService(y.current);try{n.getDetails({placeId:e,fields:["geometry.location"]},(function(e){var n,i,r,l;console.log(null===e||void 0===e||null===(n=e.geometry)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.toJSON()),t(null===e||void 0===e||null===(r=e.geometry)||void 0===r||null===(l=r.location)||void 0===l?void 0:l.toJSON())}))}catch(i){console.error(i)}}}(null===n||void 0===n?void 0:n.place_id),g(n?[n].concat((0,i.Z)(v)):v),s(n)},onInputChange:function(e,t){m(t)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{label:"Add a location",fullWidth:!0}))},renderOption:function(e,t){var n=t.structured_formatting.main_text_matched_substrings||[],i=G()(t.structured_formatting.main_text,n.map((function(e){return[e.offset,e.offset+e.length]})));return(0,b.jsx)("li",(0,l.Z)((0,l.Z)({},e),{},{children:(0,b.jsxs)(Z.ZP,{container:!0,alignItems:"center",children:[(0,b.jsx)(Z.ZP,{item:!0,sx:{display:"flex",width:44},children:(0,b.jsx)(U.Z,{sx:{color:"text.secondary"}})}),(0,b.jsxs)(Z.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[i.map((function(e,t){return(0,b.jsx)(L.Z,{component:"span",sx:{fontWeight:e.highlight?"bold":"regular"},children:e.text},t)})),(0,b.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:t.structured_formatting.secondary_text})]})]})}))}}),(0,b.jsx)("div",{ref:y})]})}var te=n(37753),ne="AIzaSyD6z6GrsWKaYbRMGjSbBx8kAqlyMMoLQOs",ie=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],re=j.Ry({venue_id:j.Z_().nullable().when("is_partnered",(function(e,t){return e?t.required("Venue is required"):t}))}),le=function(){console.log(ne);var e=(0,d.useMemo)((function(){return["places"]}),[]);return(0,te.Db)({googleMapsApiKey:ne,libraries:e}).isLoaded?(0,b.jsx)(oe,{}):(0,b.jsx)("div",{children:"Loading..."})},oe=function(){var e=(0,d.useMemo)((function(){return{lat:43.45,lng:-80.49}}),[]),t=(0,d.useState)(null),n=(0,o.Z)(t,2),i=n[0],r=n[1],l=(0,d.useState)(null),a=(0,o.Z)(l,2),s=a[0],u=a[1];return(0,d.useEffect)((function(){i&&s.panTo(i)}),[i]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ee,{setSelected:r}),(0,b.jsx)(te.b6,{zoom:12,center:e,mapContainerClassName:"map-container",mapContainerStyle:{width:"100%",height:"300px"},onLoad:function(e){return u(e)},options:{streetViewControl:!1,styles:ie},children:i&&(0,b.jsx)(te.Jx,{position:i})})]})},ae=function(e){var t,n,i,r=e.detailsData,a=e.setDetailsData,s=e.handleNext,u=e.handleBack,c=(e.setErrorIndex,(0,w.TA)({initialValues:{country_id:r.country_id,state_id:r.state_id,city_id:r.city_id,zipcode:r.zipcode,address:r.address,venue_id:r.venue_id,is_partnered:null!=r.venue_id,online_event:r.online_event,online_location:r.online_location},validationSchema:re,onSubmit:function(e,t){var n=t.setFieldError,i=t.setFieldTouched,r=t.setErrors;console.log(c);var o=(0,l.Z)({},e);o.online_event?(o.venue_id=null,o.country_id=null,o.state_id=null,o.city_id=null,o.zipcode=null,o.address=null):o.online_location=null,a((function(e){return(0,l.Z)((0,l.Z)({},e),o)})),s(o,{setFieldTouched:i,setErrors:r,setFieldError:n,dirty:c.dirty})}})),h=(0,B.I0)();d.useEffect((function(){h((0,H.ho)())}),[h]);var m=(0,B.v9)((function(e){return console.log(e),e.venue})).venues,x=(0,d.useState)([]),f=(0,o.Z)(x,2),y=f[0],j=f[1],T=(0,d.useState)([]),k=(0,o.Z)(T,2),F=k[0],D=k[1],E=(0,B.v9)((function(e){return console.log(e),e.demographics})),q=E.states,I=E.countries,V=E.cities;d.useEffect((function(){0===I.length&&h((0,Q.ox)())}),[]),d.useEffect((function(){var e,t=I.filter((function(e){return!0===e.status}));(j(t),1===(null===t||void 0===t?void 0:t.length))&&c.setFieldValue("country_id",null===(e=t[0])||void 0===e?void 0:e.id)}),[I]),d.useEffect((function(){var e,t=q.filter((function(e){return!0===e.status}));(D(t),1===(null===t||void 0===t?void 0:t.length))&&c.setFieldValue("state_id",null===(e=t[0])||void 0===e?void 0:e.id)}),[q]),d.useEffect((function(){c.values.country_id&&h((0,Q.wl)(c.values.country_id))}),[c.values.country_id]),d.useEffect((function(){c.values.state_id&&h((0,Q.MC)(c.values.state_id))}),[c.values.state_id]);var M=(0,d.useMemo)((function(){return m.map((function(e){return(0,l.Z)({name:e.title},e)}))}),[m]),W=(0,d.useMemo)((function(){return M.find((function(e){return e.id===c.values.venue_id}))}),[c.values.venue_id]),R=(0,d.useMemo)((function(){return!c.values.online_event}),[c.values.online_event]),N=((0,d.useMemo)((function(){return{lat:43.45,lng:-80.49}}),[]),(0,d.useState)(null)),O=(0,o.Z)(N,2);O[0],O[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Venue Details"}),(0,b.jsx)("form",{onSubmit:c.handleSubmit,id:"validation-forms",children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:3,children:[(0,b.jsxs)(Z.ZP,{container:!0,item:!0,xs:12,alignItems:"center",children:[(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsx)(S.Z,{control:(0,b.jsx)(Y.Z,{checked:c.values.online_event||!1,name:"online_event",onChange:function(e){return c.setFieldValue("online_event",e.target.checked)}}),label:"Is Online"})}),!R&&(0,b.jsx)(Z.ZP,{item:!0,xs:8,children:(0,b.jsx)(C.Z,{id:"online_location",name:"online_location",label:"Link",fullWidth:!0,autoComplete:"shipping address-line1",value:c.values.online_location,onChange:function(e){c.handleChange(e)},error:c.touched.online_location&&Boolean(c.errors.online_location),helperText:c.touched.online_location&&c.errors.online_location})})]}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(le,{})}),R&&(0,b.jsxs)(Z.ZP,{container:!0,item:!0,xs:12,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsx)(S.Z,{control:(0,b.jsx)(Y.Z,{checked:c.values.is_partnered||!1,name:"is_partnered",onChange:function(e){c.setFieldValue("is_partnered",e.target.checked),e.target.checked||c.setFieldValue("venue_id",null)}}),label:"Choose Venue"})}),c.values.is_partnered&&(0,b.jsx)(Z.ZP,{item:!0,xs:8,children:(0,b.jsx)(P.Z,{id:"venue_id",name:"venue_id",options:M,getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name,", ").concat((null===e||void 0===e?void 0:e.address)||"")},isOptionEqualToValue:function(e,t){return console.log(t),e.id===t.id},value:M.find((function(e){return e.id===c.values.venue_id}))||null,onChange:function(e,t){console.log(t),c.setFieldValue("venue_id",(null===t||void 0===t?void 0:t.id)||null)},renderOption:function(e,t){var n=t||{},i=n.address,r=n.city,o=n.state,a=n.country,s=n.zipcode,d=[null===r||void 0===r?void 0:r.name,null===o||void 0===o?void 0:o.name,null===a||void 0===a?void 0:a.name,s].filter(Boolean).join(", ");return(0,b.jsx)("li",(0,l.Z)((0,l.Z)({},e),{},{children:(0,b.jsxs)(Z.ZP,{container:!0,alignItems:"center",children:[(0,b.jsx)(Z.ZP,{item:!0,sx:{display:"flex",width:44},children:(0,b.jsx)(J.Z,{sx:{color:"text.secondary"}})}),(0,b.jsxs)(Z.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,b.jsx)(L.Z,{component:"span",sx:{fontWeight:"bold"},children:t.name}),(0,b.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:i}),(0,b.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:d})]})]})}))},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{autoComplete:"shipping address",label:"Venue *",placeholder:"Select Venue",error:c.touched.venue_id&&Boolean(c.errors.venue_id),helperText:c.touched.venue_id&&c.errors.venue_id}))}})})]}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:c.values.is_partnered?(0,b.jsx)(C.Z,{id:"address_venue",name:"address_venue",label:"Address (Venue)",autoFocus:!0,disabled:!0,fullWidth:!0,value:(null===W||void 0===W?void 0:W.address)||"",onChange:function(){}}):(0,b.jsx)(C.Z,{id:"address",name:"address",label:"Address",fullWidth:!0,value:c.values.address||"",onChange:function(e){c.handleChange(e)},error:c.touched.address&&Boolean(c.errors.address),helperText:c.touched.address&&c.errors.address})}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:c.values.is_partnered?(0,b.jsx)(C.Z,{label:"Country (Venue)",autoFocus:!0,disabled:!0,fullWidth:!0,value:(null===W||void 0===W||null===(t=W.country)||void 0===t?void 0:t.name)||"",onChange:function(){}}):(0,b.jsx)(P.Z,{id:"country_id",name:"country_id",options:y,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return console.log(t),e.id===t.id},value:y.find((function(e){return e.id==c.values.country_id}))||null,onChange:function(e,t){console.log(t),c.setFieldValue("country_id",null===t||void 0===t?void 0:t.id)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{autoComplete:"shipping country",label:"Country *",placeholder:"Select Country",error:c.touched.country_id&&Boolean(c.errors.country_id),helperText:c.touched.country_id&&c.errors.country_id}))}})}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:c.values.is_partnered?(0,b.jsx)(C.Z,{label:"State (Venue)",autoFocus:!0,disabled:!0,fullWidth:!0,value:(null===W||void 0===W||null===(n=W.state)||void 0===n?void 0:n.name)||"",onChange:function(){}}):(0,b.jsx)(P.Z,{id:"state_id",name:"state_id",options:F,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return console.log(t),(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},value:F.find((function(e){return e.id==c.values.state_id}))||null,onChange:function(e,t){console.log(t),c.setFieldValue("state_id",null===t||void 0===t?void 0:t.id)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{autoComplete:"shipping state",label:"State *",placeholder:"Select State",error:c.touched.state_id&&Boolean(c.errors.state_id),helperText:c.touched.state_id&&c.errors.state_id}))}})}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:c.values.is_partnered?(0,b.jsx)(C.Z,{label:"City (Venue)",autoFocus:!0,disabled:!0,fullWidth:!0,value:(null===W||void 0===W||null===(i=W.city)||void 0===i?void 0:i.name)||"",onChange:function(){}}):(0,b.jsx)(P.Z,{id:"city_id",name:"city_id",options:V,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return console.log(t),e.id===t.id},value:V.find((function(e){return e.id==c.values.city_id}))||null,onChange:function(e,t){console.log(t),c.setFieldValue("city_id",null===t||void 0===t?void 0:t.id)},renderInput:function(e){return(0,b.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{autoComplete:"shipping city",label:"City *",placeholder:"Select city",error:c.touched.city_id&&Boolean(c.errors.city_id),helperText:c.touched.city_id&&c.errors.city_id}))}})}),R&&(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:c.values.is_partnered?(0,b.jsx)(C.Z,{id:"zipcode_venue",name:"zipcode_venue",label:"Zipcode (Venue)",disabled:!0,fullWidth:!0,value:(null===W||void 0===W?void 0:W.zipcode)||"",onChange:function(){}}):(0,b.jsx)(C.Z,{id:"zipcode",name:"zipcode",label:"Zip / Postal code",fullWidth:!0,autoComplete:"shipping postal-code",value:c.values.zipcode||"",onChange:c.handleChange,error:c.touched.zipcode&&Boolean(c.errors.zipcode),helperText:c.touched.zipcode&&c.errors.zipcode})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",children:[(0,b.jsx)(g.Z,{onClick:u,sx:{my:3,ml:1},children:"Back"}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",children:"Next"})})]})})]})})]})},se=n(81628),de=n(16031),ue=j.Ry({}),ce=function(e){var t,n,i=e.detailsData,r=e.setDetailsData,o=e.handleNext,a=e.handleBack,s=(e.setErrorIndex,(0,w.TA)({initialValues:{meta_title:i.meta_title||"",meta_keywords:i.meta_keywords||"",meta_description:i.meta_description||"",images:(0,de.isString)(i.images)?null===(t=i.images)||void 0===t?void 0:t.split(","):i.images||[],posters:(0,de.isString)(i.posters)?null===(n=i.posters)||void 0===n?void 0:n.split(","):i.posters||[],thumbnail:(0,de.isString)(i.thumbnail)?[i.thumbnail]:null},validationSchema:ue,onSubmit:function(e,t){var n=t.setFieldError,i=t.setFieldTouched,a=t.setErrors,d=(t.dirty,(0,l.Z)({},e));r((function(t){return(0,l.Z)((0,l.Z)({},t),e)})),o(d,{setFieldTouched:i,setErrors:a,setFieldError:n,dirty:s.dirty})}}));(0,c.Z)();return(0,d.useEffect)((function(){console.log(s.values)}),[s.values]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Media"}),(0,b.jsx)("form",{onSubmit:s.handleSubmit,id:"validation-forms",style:{overflow:"auto"},children:(0,b.jsx)(W._,{dateAdapter:O.H,children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:3,style:{},children:[(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsxs)(Z.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,b.jsx)(p.Z,{variant:"body2",children:"Images *"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:8,children:(0,b.jsx)(se.Z,{attachments:s.values.images,setFieldValue:s.setFieldValue,fieldName:"images",multiple:!0})})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsxs)(Z.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,b.jsx)(p.Z,{variant:"body2",children:"Posters *"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:8,children:(0,b.jsx)(se.Z,{attachments:s.values.posters,setFieldValue:s.setFieldValue,fieldName:"posters",multiple:!0})})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsxs)(Z.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,b.jsx)(p.Z,{variant:"body2",children:"Thumbnail *"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,sm:8,children:(0,b.jsx)(se.Z,{attachments:s.values.thumbnail,setFieldValue:s.setFieldValue,fieldName:"thumbnail"})})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"SEO"})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsx)(C.Z,{id:"meta_title",name:"meta_title",label:"Title (Meta)",value:s.values.meta_title,onChange:s.handleChange,error:s.touched.meta_title&&Boolean(s.errors.meta_title),helperText:s.touched.meta_title&&s.errors.meta_title,fullWidth:!0})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsx)(C.Z,{id:"meta_keywords",name:"meta_keywords",label:"Keywords (Meta)",value:s.values.meta_keywords,onChange:s.handleChange,fullWidth:!0,error:s.touched.meta_keywords&&Boolean(s.errors.meta_keywords),helperText:s.touched.meta_keywords&&s.errors.meta_keywords})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,children:(0,b.jsx)(C.Z,{id:"meta_description",name:"meta_description",label:"Description (Meta)",value:s.values.meta_description,onChange:s.handleChange,fullWidth:!0,error:s.touched.meta_description&&Boolean(s.errors.meta_description),helperText:s.touched.meta_description&&s.errors.meta_description})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",children:[(0,b.jsx)(g.Z,{onClick:a,sx:{my:3,ml:1},children:"Back"}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",children:"Next"})})]})})]})})})]})},he=n(55281),me=n(85077),pe=n(53774),xe=(j.Ry({}),n(12401)),fe=j.Ry({title:j.Z_().required("Title is Required"),price:j.Rx().min(0,"Price should be positive"),quantity:j.Rx().min(1,"Quantity should greater than 0")});var ve=function(e){var t=e.handleAddItem,n=e.setAddItemClicked,i=(0,w.TA)({initialValues:{title:"",description:"",price:0,quantity:1,customer_limit:10,discount_rate:0,status:!0},validationSchema:fe,onSubmit:function(e){e&&t(e)}});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("form",{onSubmit:i.handleSubmit,children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:xe.dv,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Title"}),(0,b.jsx)(C.Z,{id:"title",name:"title",value:i.values.title,onBlur:i.handleBlur,error:i.touched.title&&Boolean(i.errors.title),helperText:i.touched.title&&i.errors.title,onChange:i.handleChange,fullWidth:!0,placeholder:"Title"})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Description"}),(0,b.jsx)(C.Z,{id:"description",name:"description",value:i.values.description,onBlur:i.handleBlur,error:i.touched.description&&Boolean(i.errors.description),helperText:i.touched.description&&i.errors.description,onChange:i.handleChange,fullWidth:!0,placeholder:"Description"})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Price"}),(0,b.jsx)(C.Z,{id:"price",name:"price",type:"number",InputProps:{inputProps:{min:0}},value:i.values.price,onBlur:i.handleBlur,error:i.touched.price&&Boolean(i.errors.price),helperText:i.touched.price&&i.errors.price,onChange:i.handleChange,fullWidth:!0,placeholder:"Price (per ticket)"})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Discount %"}),(0,b.jsx)(C.Z,{id:"discount_rate",name:"discount_rate",type:"number",InputProps:{inputProps:{min:0,max:100}},value:i.values.discount_rate,onBlur:i.handleBlur,error:i.touched.discount_rate&&Boolean(i.errors.discount_rate),helperText:i.touched.discount_rate&&i.errors.discount_rate,onChange:i.handleChange,fullWidth:!0,placeholder:"Discount %"})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Quantity"}),(0,b.jsx)(C.Z,{id:"quantity",name:"quantity",type:"number",InputProps:{inputProps:{min:1}},value:i.values.quantity,onBlur:i.handleBlur,error:i.touched.quantity&&Boolean(i.errors.quantity),helperText:i.touched.quantity&&i.errors.quantity,onChange:i.handleChange,fullWidth:!0,placeholder:"Max Quantity"})]})}),(0,b.jsx)(Z.ZP,{item:!0,xs:4,md:2,children:(0,b.jsxs)(v.Z,{spacing:1,children:[(0,b.jsx)(p.Z,{variant:"subtitle1",children:"Limit"}),(0,b.jsx)(C.Z,{id:"customer_limit",name:"customer_limit",type:"number",value:i.values.customer_limit,onBlur:i.handleBlur,error:i.touched.customer_limit&&Boolean(i.errors.customer_limit),helperText:i.touched.customer_limit&&i.errors.customer_limit,onChange:i.handleChange,fullWidth:!0,placeholder:"Limit"})]})}),(0,b.jsx)(Z.ZP,{item:!0,container:!0,justifyContent:"flex-end",children:(0,b.jsxs)(v.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,b.jsx)(g.Z,{color:"error",onClick:function(){return n(!1)},children:"Cancel"}),(0,b.jsx)(g.Z,{size:"small",variant:"contained",type:"submit",children:"Add"})]})})]})})})},ge=n(51629),ye=n(66835),Ze=n(23477),_e=n(24076),je=n(67478),be=n(57861),Te=n(51312),Ce=n(88587),Pe=n.n(Ce),Se=function(e){return Pe()(e).format({symbol:"\u20b9"})};var ke=function(e){var t=e.productsData,n=e.deleteProductHandler;return(0,b.jsx)(b.Fragment,{children:t.length?(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(ge.Z,{children:(0,b.jsxs)(ye.Z,{children:[(0,b.jsx)(Ze.Z,{children:(0,b.jsxs)(_e.Z,{children:[(0,b.jsx)(je.Z,{sx:{pl:3},children:"Ticket Details"}),(0,b.jsx)(je.Z,{align:"right",children:"Price"}),(0,b.jsx)(je.Z,{align:"right",children:"Discount %"}),(0,b.jsx)(je.Z,{align:"right",children:"Sale Price"}),(0,b.jsx)(je.Z,{align:"right",children:"Tax %"}),(0,b.jsx)(je.Z,{align:"right",children:"Quantity"}),(0,b.jsx)(je.Z,{align:"right",children:"Limit"}),(0,b.jsx)(je.Z,{align:"right",sx:{pr:3}})]})}),(0,b.jsx)(be.Z,{children:t.map((function(e,t){return(0,b.jsxs)(_e.Z,{children:[(0,b.jsxs)(je.Z,{sx:{pl:3},children:[(0,b.jsx)(p.Z,{align:"left",variant:"subtitle1",children:e.title}),(0,b.jsx)(p.Z,{align:"left",variant:"body2",children:e.description})]}),(0,b.jsx)(je.Z,{align:"right",children:Se(e.price)}),(0,b.jsx)(je.Z,{align:"right",children:e.discount_rate}),(0,b.jsx)(je.Z,{align:"right",children:Se(e.final_price)}),(0,b.jsx)(je.Z,{align:"right",children:e.tax_rate}),(0,b.jsx)(je.Z,{align:"right",children:e.quantity}),(0,b.jsx)(je.Z,{align:"right",children:e.customer_limit}),(0,b.jsx)(je.Z,{sx:{pr:1},align:"right",children:(0,b.jsx)(h.Z,{color:"error",size:"small",onClick:function(){return n(e.id)},"aria-label":"Product Delete",children:(0,b.jsx)(Te.Z,{fontSize:"small"})})})]},t)}))})]})})}):null})},we=[{step:"detail",label:"Basic Details"},{step:"timing",label:"Schedule"},{step:"location",label:"Venue"},{step:"media",label:"Media"}],Fe=function(e,t,n,i,r,l,o,a,s,d){switch(e){case 0:return(0,b.jsx)(I,{handleNext:t,setErrorIndex:i,detailsData:s,setDetailsData:d});case 1:return(0,b.jsx)(A,{handleNext:t,handleBack:n,setErrorIndex:i,detailsData:s,setDetailsData:d});case 2:return(0,b.jsx)(ae,{handleNext:t,handleBack:n,setErrorIndex:i,detailsData:s,setDetailsData:d});case 3:return(0,b.jsx)(ce,{handleNext:t,handleBack:n,setErrorIndex:i,detailsData:s,setDetailsData:d});default:return(0,b.jsx)("div",{children:"No Step Found"})}},De={"& .MuiCardHeader-action":{m:0,alignSelf:"center"}},Be=function(e){var t=e.event,n=(0,B.I0)(),a=((0,c.Z)(),(0,u.UO)().slug),j=(0,u.s0)(),C=d.useState(!1),P=(0,o.Z)(C,2),S=P[0],k=P[1],w=d.useState(0),F=(0,o.Z)(w,2),D=F[0],E=F[1],q=d.useState((0,l.Z)({booking_close_before:30,featured:!1,country_id:null,state_id:null,city_id:null,id:null},t)),I=(0,o.Z)(q,2),V=I[0],M=I[1],W=d.useState({}),R=(0,o.Z)(W,2),N=(R[0],R[1],d.useState({})),O=(0,o.Z)(N,2),z=(O[0],O[1],d.useState(null)),A=(0,o.Z)(z,2),Y=A[0],L=A[1],H=(0,d.useState)([]),J=(0,o.Z)(H,2),Q=J[0],U=J[1];(0,d.useEffect)((function(){if(a){var e=function(){var e=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.Z.get("/api/events/".concat(a));case 2:t=e.sent,M((function(e){var n;return(0,l.Z)((0,l.Z)({},e),null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch()}}),[a]),(0,d.useEffect)((function(){if(V.id){var e=function(){var e=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.Z.get("/api/tickets?event_id=".concat(V.id));case 2:t=e.sent,U((function(e){var n;return[].concat((0,i.Z)(e),(0,i.Z)(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch()}}),[V.id]);var K=function(e){M((function(t){var n;return(0,l.Z)((0,l.Z)({},t),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)})),E(D+1)},G=function(){var e=(0,r.Z)(s().mark((function e(t,n,i,r,l){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n,!0,!0);case 2:l(n,t[n].join(", "));case 3:case"end":return e.stop()}}),e)})));return function(t,n,i,r,l){return e.apply(this,arguments)}}(),$=function(e){var t=e.setFieldTouched,n=void 0===t?null:t,i=e.setErrors,r=void 0===i?null:i,l=e.setFieldError,o=void 0===l?null:l;return function(e){null!==e&&void 0!==e&&e.errors&&Object.keys(null===e||void 0===e?void 0:e.errors).forEach((function(t){G(null===e||void 0===e?void 0:e.errors,t,n,r,o)}))}},X=function(){var e=(0,r.Z)(s().mark((function e(t,i){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.step=null===(r=we[D])||void 0===r?void 0:r.step,t.id=V.id,t._method=null,t.id&&i.dirty?(t._method="put",n((0,he.eJ)(t,K,$(i)))):t.id?E(D+1):n((0,he.vP)(t,K,$(i)))}catch(l){console.error(l)}L(null);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){console.log(V)}),[V]);return(0,b.jsxs)(T.Z,{title:"".concat(null!==V&&void 0!==V&&V.id?"Update":"Add"," Event"),secondary:(0,b.jsx)(h.Z,{onClick:function(){return j("/manage/event-list",{replace:!0})},size:"large",children:(0,b.jsx)(pe.Z,{})}),headerSX:De,children:[(0,b.jsx)(m.Z,{activeStep:D,sx:{pt:3,pb:5},children:we.map((function(e,t){var n=e.step,i=e.label,r={};return t===Y&&(r.optional=(0,b.jsx)(p.Z,{variant:"caption",color:"error",children:"Error"}),r.error=!0),(0,b.jsx)(x.Z,{children:(0,b.jsx)(f.Z,(0,l.Z)((0,l.Z)({},r),{},{children:i}))},n)}))}),(0,b.jsx)(b.Fragment,{children:D===we.length?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)(p.Z,{variant:"h5",gutterBottom:!0,children:"Would you like to publish this event?"}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",color:"error",onClick:function(){var e={id:V.id,publish:!V.publish,step:"detail",_method:"put"};n((0,he.eJ)(e,K,$({})))},sx:{my:3,ml:1},children:null!==V&&void 0!==V&&V.publish?"Un-Publish":"Publish"})})]})}):(0,b.jsx)(b.Fragment,{children:Fe(D,X,(function(){E(D-1)}),L,0,0,0,0,V,M)})}),(0,b.jsx)(y.Z,{}),(null===V||void 0===V?void 0:V.id)&&(0,b.jsxs)(Z.ZP,{children:[(0,b.jsx)(ke,{productsData:Q,deleteProductHandler:function(e){U(Q.filter((function(t){return t.id!==e})))}}),S?(0,b.jsx)(Z.ZP,{item:!0,xs:12,children:(0,b.jsx)(ve,{handleAddItem:function(e){U([].concat((0,i.Z)(Q),[(0,l.Z)({},e)]));var t=function(){var t=(0,r.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.Z.postForm("/api/tickets",(0,l.Z)((0,l.Z)({},e),{},{event_id:V.id}));case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().catch(),k(!1)},setAddItemClicked:k})}):(0,b.jsxs)(Z.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsx)(g.Z,{variant:"text",onClick:function(){return k(!0)},children:"+ Add Ticket"}),(null===Q||void 0===Q?void 0:Q.length)>0&&(0,b.jsx)(_.Z,{children:(0,b.jsx)(g.Z,{variant:"contained",color:"error",onClick:function(){var e={id:V.id,publish:!V.publish,step:"detail",_method:"put"};n((0,he.eJ)(e,K,$({})))},sx:{my:3,ml:1},children:null!==V&&void 0!==V&&V.publish?"Un-Publish":"Publish"})})]})]})]})}}}]);